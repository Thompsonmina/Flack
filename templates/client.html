{% extends "layout.html" %}

{% block script %} 
<script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.11/handlebars.min.js"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>

<script src="https://kit.fontawesome.com/8f0c576a88.js" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.26.0/moment.min.js"></script>

<template id="usertemplate" type="text/x-handlebars-template">
	{% raw -%}
	<span id="user"> {{ name }} </span>
	<img src="https://api.adorable.io/avatars/24/{{ name }}@adorable.io.png" style="border-radius: 20%;">
	{% endraw -%}
</template>

<template id="chatstemplate" type="text/x-handlebars-template">
	{% raw -%}
	{{#each messages}}
		{{#if (isCurrentUser this.user)}}
			
			<div class="bubbleWrapper">
				<span class="own"> {{ this.user }} </span>
				<div class="inlineContainer own">
					<div class="ownBubble own">
						 {{ this.message }}
					</div>
				</div>
				<span class="own">{{this.date}}</span>		
			</div>

		{{else}}
			<div class="bubbleWrapper">
				<span class="other">{{ this.user }}</span>
				<div class="inlineContainer">
						
					<div class="otherBubble other">
							{{ this.message }}
					</div>
				</div><span class="other">{{this.date}}</span>
			</div>
		{{/if}}
	{{/each}}
	{% endraw -%}
</template>

<template id="addUserCheckboxes" type="text/x-handlebars-template">
  {% raw -%}
  {{#each users}}
    
    <div>
      <input type="checkbox" name="members" value="{{ this }}">
      <label for="{{ this }}">{{this}}</label>
    </div>

  {{/each}}
  {% endraw -%}
</template>


<script src="{{ url_for('static', filename='client.js') }}"  type="text/javascript"></script>

{% endblock %}

{% block title %} Flack | {{ session["username"] }} {% endblock %}

{% block content %}

<div class="container-fluid content">
	
	<div class="sidemenu">
		<hr size="10">
		<div class=sectionholder>
			<div class="userprofile">
			</div>
		</div>

		<hr size="10">
		<div class="sectionholder">
			<div class="channelflex">
			<span>Channels</span>
			<button class="iconbutton" id="create-publicbtn" data-kind="public">
			<i class="fas fa-plus"></i>
			</button>
			</div>
		</div>

		<div class="channelbuttons">
		{% for channel in channels %}

			<button class="buttn publicButtn" id="btn-{{ channel }}" name="{{ channel }}" data-type="public"> {{ channel }} </button>
		
		{% endfor %}
		</div>

		<hr size="10">
		<div class="sectionholder">
			<div class="channelflex">
			<span id="group"> Private Channels</span>
			<button class="iconbutton" id="create-privatebtn" data-kind="private">
			<i class="fas fa-plus"></i>
			</button>	
			</div>
		</div>

		<div class="privatechannelbuttons">
		
		</div>

	</div>

	<div class="chatwindow">

		<div class="channelbanner">
			<hr size="10">
			<h5> General </h5>
		</div>

		<div class="chatspace">
			
		</div>

		<form id="sentmssg" method="post" action="">
			<div class="textplace">
				<textarea class="" rows="2" id="comment" placeholder="write a message" name="remark"></textarea>
			</div>
			<div id="sendbuttondiv">
				<button id="sendtextbttn">Send</button>
			</div>
		</form>

	</div>


	<!-- add private channel modal -->
	<div class="modal fade" id="modalLoginForm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
	  aria-hidden="true">
	  <div class="modal-dialog" role="document">
	    <div class="modal-content">
	      <div class="modal-header text-center">
	        <h3 class="modal-title w-100 font-weight-bold">Create a Private Channel</h3>
	        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
	          <span aria-hidden="true">&times;</span>
	        </button>
	      </div>
	      <div class="modal-body mx-3">
	        <div class="md-form mb-5">
	          <input type="text" id="privateChannelName" class="form-control" placeholder="Enter Name" required="true">
	        </div>

	        <fieldset>
	            <legend>Add Users</legend>
	            <div class="privatemembers">
	            	
	            </div>

	        </fieldset>

	      </div>
	      <div class="modal-footer d-flex justify-content-center">
	        <button id="modal-confirm" class="btn btn-success"> Confirm </button>
	      </div>
	    </div>
	  </div>
	</div>

</div>

{% endblock %}